import { Box, Text, BlockStack } from '@shopify/polaris'
import React from 'react'
import ReportSummaryInfoCard from './ReportSummaryInfoCard'
import ChartypeComponent from '../TestRunsPage/ChartypeComponent'
import BarGraph from '../../../components/charts/BarGraph'

const ReportSummary = ({ reportSummaryItems, severityMap, graphData, organizationName, currentDate }) => {

    return (
        <Box id="report-summary" paddingBlockStart={600} paddingBlockEnd={600} paddingInlineStart={500} paddingInlineEnd={500}>
            <BlockStack gap="400">
                <Text variant="headingLg">1. Report summary</Text>
                <BlockStack gap="300">
                    <Text variant="bodyMd" tone='subdued'>
                        The initial security assessment conducted on {currentDate} focused on evaluating core functionalities of <span id='organization-name'>{organizationName}</span>'s API endpoints. The scan was configured to analyze authentication mechanisms, data validation controls, access management, and potential security misconfigurations to identify vulnerabilities that could impact the application's security posture.
                    </Text>
                    <ReportSummaryInfoCard summaryItems={reportSummaryItems} />

                    <Box width='100%' paddingBlockStart={400} paddingBlockEnd={200}>
                        <BlockStack gap={300}>
                            <Text variant="headingSm">Vulnerable APIs by Severity</Text>

                            <ChartypeComponent
                                data={severityMap}
                                navUrl={""} title={""} isNormal={true} boxHeight={'300px'} chartOnLeft={true} dataTableWidth="450px" boxPadding={0}
                                pieInnerSize="50%"
                                chartSize={250}
                                spaceBetween={'space-evenly'}
                            />
                        </BlockStack>
                    </Box>

                    <Box width='100%' id='bargraph-container' paddingBlockStart={200} paddingBlockEnd={400}>
                        <BlockStack gap={300}>
                            <Text variant="headingSm">Top 5 Categories by issues</Text>

                            <BarGraph
                                data={graphData}
                                areaFillHex="true"
                                height={"320px"}
                                showYAxis={true}
                                yAxisTitle="Number of issues"
                                barGap={12}
                                showGridLines={true}
                                defaultChartOptions={{
                                    "legend": {
                                        enabled: false
                                    },
                                }}
                                xAxisTitle={'Categories'}
                                barWidth={30}
                            />
                        </BlockStack>
                    </Box>
                </BlockStack>
            </BlockStack>
        </Box>
    )
}

export default ReportSummary